<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<link rel="stylesheet" type="text/css" href="stylesheets/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title></title>

</head>
<body style="background-image:url('images/thegym.jpg')">
	<div id="alldiv">
		<div id="text" style="width: calc(100% - 240px);">
			<textarea rows="40" id="data" style="width: 100%;height:75%;font-size: 100%;background-color: #F3F3F5;" data-role="none"></textarea><p>
			<button onclick="doClear()" style="width: 20%;height: 5%;font-size: 100%;background-color: #F3F3F5;">Clear</button>
			<button onclick="getModel()" style="width: 20%;height: 5%;font-size: 100%;background-color: #F3F3F5;">Reload</button>
		    <button onclick="sampleModel()" style="width: 20%;height: 5%;font-size: 100%;background-color: #F3F3F5;">Example</button>
		
                        <button  onclick="doExec()" style="float:right; width: 20%;height: 5%;font-size: 100%;background-color: #F3F3F5;">Upload Model</button><p> 
		
        	</div>
	</div>
	<script>
        function sampleModel() {
            			document.getElementById("data").value= `<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<PMML version="4.2" xmlns="http://www.dmg.org/PMML-4_2">
    <Header description="logistic regression">
        <Application name="Apache Spark MLlib" version="1.6.1"/>
        <Timestamp>2017-07-20T09:03:50</Timestamp>
    </Header>
    <DataDictionary numberOfFields="3">
        <DataField name="deviceid" optype="continuous" dataType="double"/>
        <DataField name="heartrate" optype="continuous" dataType="double"/>
        <DataField name="target" optype="categorical" dataType="string"/>
    </DataDictionary>
    <RegressionModel modelName="logistic regression" functionName="classification" normalizationMethod="logit">
        <MiningSchema>
            <MiningField name="deviceid" usageType="active"/>
            <MiningField name="heartrate" usageType="active"/>
            <MiningField name="target" usageType="target"/>
        </MiningSchema>
        <RegressionTable intercept="0.0" targetCategory="1">
            <NumericPredictor name="deviceid" coefficient="-1.1506950902364852"/>
            <NumericPredictor name="heartrate" coefficient="156.97957922457476"/>
        </RegressionTable>
        <RegressionTable intercept="-0.0" targetCategory="0"/>
    </RegressionModel>
</PMML>`;			
        }
		function doExec() { 
                        setModel();
        	};

                function doClear() { 
	                document.getElementById("data").value= "";
        	};


                function setModel() {
                        if (window.XMLHttpRequest) {
                                try {
                                        req = new XMLHttpRequest();
                                } catch (e) {
                                        req = false;
                                }
                                // branch for IE/Windows ActiveX version
                        } else {
                                if (window.ActiveXObject) {
                                        try {
                                                req = new ActiveXObject("Msxml2.XMLHTTP");
                                        } catch (e) {
                                                try {
                                                        req = new ActiveXObject("Microsoft.XMLHTTP");
                                                } catch (e) {
                                                        req = false;
                                                }
                                        }
                                }
                        }
                        if (req) {
				
                                req.onreadystatechange = function() {
				}
                                req.open("POST", "model", true);
                                req.setRequestHeader("Content-type", "application/text"); 
								req.send(document.getElementById("data").value);                      
					            //req.send(json);
                        } else {
                                alert("req== false");
                        }
                };
  		function getModel() {
                        if (window.XMLHttpRequest) {
                                try {
                                        req = new XMLHttpRequest();
                                } catch (e) {
                                        req = false;
                                }
                                // branch for IE/Windows ActiveX version
                        } else {
                                if (window.ActiveXObject) {
                                        try {
                                                req = new ActiveXObject("Msxml2.XMLHTTP");
                                        } catch (e) {
                                                try {
                                                        req = new ActiveXObject("Microsoft.XMLHTTP");
                                                } catch (e) {
                                                        req = false;
                                                }
                                        }
                                }
                        }
                        if (req) {
				
                                req.onreadystatechange = function() {
					if (req.readyState == 4) {
						document.getElementById("data").value= req.responseText;
					}
				}
                                req.open("GET", "model", true);
                                req.setRequestHeader("Content-type", "application/text"); 
								req.send();                      
					            //req.send(json);
                        } else {
                                alert("req== false");
                        }
                };

                getModel();


  </script>

</body>
</html>
